<html>

<head>
    <meta name="viewport" content="width=device-width, maximum-scale=1.0">
    <title>Temple Looter</title>
    <!--<link rel="stylesheet" href="css/space-shooter.css">-->
    <link rel="icon" type="image/png" href="images/character1.png"/>
    <style>
        @font-face {
            font-family: pixelFont;
            src: url("css/joystix.ttf")
        }

        body {
            background-color: black;
            font-family: "pixelFont";
        }

        h1 {
            font-family: pixelFont;
            text-align: center;
            color: white;
            margin-top: 5%;
        }

        #hamburger {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: rgb(0, 0, 0, 0.7);
            padding: 5px;
            z-index: 3000;
            border-style: none;
        }

        .line1,
        .line2,
        .line3 {
            width: 40px;
            height: 6px;
            margin: 8px;
            background-color: white;
            border-radius: 20px;
        }



        #burger-menu {

            position: fixed;
            background-color: white;
            opacity: 0.96;
            right: 0px;
            top: 0px;
            padding: 100px 80px 100px 0px;
            z-index: -3000;
            height: 0vh;
            border-left: 1px solid black;
            transition: 0.5s;
            opacity: 0;
        }

        #burger-menu a {
            text-decoration: none;
            color: black;
            font-size: 1.3em;
        }

        #burger-menu li {
            list-style: none;
        }

        #burger-menu a:hover {
            color: #039BE5;
            transition: 0.5s;
        }

        .nav-line {
            background-color: white;
            height: 2px;
        }
    </style>
</head>

<body>

    <button id="hamburger" onclick="showMenu()">
        <div class="line1"></div>
        <div class="line2"></div>
        <div class="line3"></div>
    </button>
    <div id="burger-menu" show="false">
        <ul>
            <li>
                <a href="index.html">Home</a>
            </li>
            <hr class="nav-line">
            <li>
                <a href="https://nifty-hopper-c1da01.netlify.app/" target="_blank">React Travel Blog</a>
            </li>
            <hr class="nav-line">
            <li>
                <a href="shooter.html">JS Space Shooter</a>
            </li>
            <hr class="nav-line">
            <li>
                <a href="pong.html">JS Pong</a>
            </li>
            <hr class="nav-line">
            <li>
                <a href="https://adoring-galileo-71fde2.netlify.app/">React Todo App</a>
            </li>
            <hr class="nav-line">
            <li>
                <a href="newgame.html">Drawing App</a>
            </li>
            <hr class="nav-line">
            <li>
                <a href="templelooter.html">Temple Looter</a>
            </li>
        </ul>
    </div>

    <h1>Temple Looter</h1>
    <canvas id="game-canvas" style="display: block;margin: 100px auto"></canvas>
    <img src="images/treasure.png" id="treasure" style="display:none">
    <img src="images/dungeon-background2.png" id="background" style="display:none">
    <img src="images/dungeon-wall.png" id="wall" style="display:none">
    <img src="images/character1.png" id="character1" style="display:none">
    <img src="images/character2.png" id="character2" style="display:none">
    <img src="images/bat1.png" id="bat1" style="display:none">
    <img src="images/bat2.png" id="bat2" style="display:none">
    <img src="images/key.png" id="key" style="display:none">
    <img src="images/background-lava1.png" id="lava-background1" style="display:none">
    <img src="images/background-lava2.png" id="lava-background2" style="display:none">
    <img src="images/bridge.png" id="bridge" style="display:none">
    <audio src="sounds/dungeon-death.wav" id="death"></audio>
    <audio src="sounds/looter-startsound.wav" id="start-sound"></audio>
    <audio src="sounds/looter-gameover.wav" id="gameover-sound"></audio>
    <audio src="sounds/treasure.wav" id="treasure-sound"></audio>
    <audio src="sounds/gate-passed.wav" id="gate-sound"></audio>
    <audio src="sounds/looter-hurt.wav" id="hurt-sound"></audio>
    <audio src="sounds/looter-victory.wav" id="victory-sound"></audio>

    <script>
        const canvas = document.getElementById("game-canvas");
        const ctx = canvas.getContext("2d");
        let aPressed, sPressed, wPressed, dPressed, spacePressed = false;

        let player = {x:0,y:0,width:0,height:0,characterSprite:"",invincibility:false};
        let characterSprite1 = document.getElementById("character1");
        let characterSprite2 = document.getElementById("character2");

        let background1Level3 = document.getElementById("lava-background1");
        let background2Level3 = document.getElementById("lava-background2");
        let bridgeImage = document.getElementById("bridge");
        let obstacleX;
        let obstacleY;
        let obstacleY2;
        const obstacleWidth = 30;
        let obstacleHeight;
        let isCollision;
        let isCollisionY;
        let kickback;
        let kickbackY;

        let treasure = {x:0,y:0,collectMessage:"LOOT!",messagteState:false,collectState:false};

        let passedGate;
        let score;

        let gameSpeed;

        let gatesPassed;

        let lives;

        let character;

        let characterSprite;

        let characterAnimation;

        let invincibility = false;

        let gameInterval;

        let backgroundFilter = "none";


        let displayKeyMessage = false;

        let gameover = false;

        let bat;

        let bat1 = {x:700,y:100, distanceX: 0, distanceY: 0, speedX:0.5,speedY:0.5}; 

        let bat2 = {x:700,y:400,distanceX: -30, distanceY: 10,speedX:0.5,speedY: 0.8};

        let bat3 = {x:500, y:100,distanceX:30,distanceY:10,speedX:0.8,speedY:0.5};

        let randomBat = {x:200, y:200, multiplierX:1,multiplierY:1};

        let randomBat2 = {x:300, y:50, multiplierX:-1,multiplierY:1};
        
        let batSprite;

        let batAnimation;

        let randomNumber;

        let round = 1;

        let treasureCooldown = false;

        let keyAppears;

        let backgroundLevel3 = document.getElementById("background-lava1");

        let backgroundLavaOne = false;


        let key = {x:0,y:0,collectMessage:"KEY!",messageState:false,collectState:false};
        let keys = 0;
        let keysRequired = 5;

        let bridge1 = {x:84,y:100,width:100,height:50};
        let bridge2= {x:192,y:700,width:100,height:50};

        const deathsound = document.getElementById("death");
        const startsound = document.getElementById("start-sound");
        const gameoversound = document.getElementById("gameover-sound");
        const treasuresound = document.getElementById("treasure-sound");
        const gatesound = document.getElementById("gate-sound");
        const hurtsound = document.getElementById("hurt-sound");
        const victorysound = document.getElementById("victory-sound");




        window.onload = function () {
            canvas.width = 400;
            canvas.height = 400;
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.textAlign = "center";
            ctx.font = "20px pixelFont";
            ctx.fillStyle = "white";
            ctx.fillText("Press space to start", canvas.width / 2, 300);
            ctx.fillText("Controls", canvas.width / 2, 70);
            ctx.fillText("W = UP", canvas.width / 2, 120);
            ctx.fillText("A = Left", canvas.width / 2, 150);
            ctx.fillText("D = Right", canvas.width / 2, 180);
            ctx.fillText("S = DOWN", canvas.width / 2, 210);
            document.addEventListener("keydown", keyDownHandler, false);
            document.addEventListener("keyup", keyUpHandler, false);
            characterAnimation = setInterval(animateCharacter, 200);
            batAnimation = setInterval(animateBat,160);
            backgroundAnimation = setInterval(toggleBackground,500);
            makeKeyAppear = setInterval(keyStatusToggle,5000);
            document.addEventListener("keydown", event => {
                if (event.keyCode === 32 && !spacePressed) {
                    spacePressed = true;
                    initialize();
                    ctx.fillStyle = "black";
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = "white";
                    ctx.fillText("Get ready", canvas.width / 2, canvas.height / 2);
                    setTimeout(startGame, 1500);
                    startsound.play();

                }
            });
        }

        function startGame() {
            spacePressed = true;
            initialize();
            gameInterval = setInterval(callAllRound1, 1000 / gameSpeed);
            randomInterval = setInterval(randomGenerator, 500);
        }

        function keyStatusToggle(){
            keyAppears = !keyAppears;
            key.collectState = false;
            key.x = 20 + Math.floor(Math.random() * 200);
            key.y = 20 + Math.floor(Math.random() * 300);
        }

        function drawKey(){
            if (!key.collectState && keyAppears) {
                ctx.webkitImageSmoothingEnabled = false;
                ctx.mozImageSmoothingEnabled = false;
                ctx.imageSmoothingEnabled = false;
                ctx.drawImage(document.getElementById("key"), key.x, key.y, 40, 24);
            }
        }

        function collectKey(){
            if (player.x < key.x + 40 && player.x + player.width > key.x && player.y < key.y + 25 && player.y + player.height > key.y && !key.collectState) {
                treasuresound.pause();
                treasuresound.currentTime = 0;
                treasuresound.play();
                keys += 1;
                key.collectState = true;
                displayKeyMessage = true;
            }
        }

    












        function initialize() {
    
            keys = 0;
            keysRequired = 5;
            spacePressed = true;
            player.x = 0;
            player.y = canvas.height / 2;
            obstacleX = canvas.width + 200;
            obstacleY = 0;
            obstacleHeight = 25 * Math.floor(Math.random() * 10);
            isCollision = false;
            isCollisionY = false;
            treasure.x = 10 + Math.floor(Math.random() * 200);
            treasure.y = 50;
            treasure.collectState = false;
            passedGate = false;
            score = 0;
            gameSpeed = 120;
            gatesPassed = 0;
            lives = 3;
            character = true;
            player.characterSprite = characterSprite2;
            gameover = false;
            bat = false;
            bat1 = {x:700,y:100, distanceX: 0, distanceY: 0, speedX:0.5,speedY:0.5}; 

            bat2 = {x:700,y:400,distanceX: -30, distanceY: 10,speedX:0.5,speedY: 0.8};

            bat3 = {x:500, y:100,distanceX:30,distanceY:10,speedX:0.8,speedY:0.5};

            randomBat = {x:200, y:200, multiplierX:1,multiplierY:1};

            randomBat2 = {x:300, y:50, multiplierX:-1,multiplierY:1};
        }


        function callAllRound1() {

            ctx.shadowColor = "black";
            ctx.shadowBlur = 5;
            ctx.shadowOffsetX = 5;
            ctx.shadowOffsetY = -5;


            ctx.webkitImageSmoothingEnabled = false;
            ctx.mozImageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            ctx.drawImage(document.getElementById("background"), 0, 0, canvas.width, canvas.height);

            collision();
            countPoints();
            ctx.fillStyle = "white";
            ctx.font = "20px pixelFont";
            ctx.textAlign = "start";
            drawTreasure();
            collectTreasure();
            drawKey();
            drawObstacle();
            drawSquare();
            moveSquare();
           
            collectKey();
            
            drawBat(bat1);


            moveBat(bat1);


            
            

            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.fillText("Score: " + score, 0, 24);
            ctx.fillText("🗝x"+ keys,190,24);
            keyMessage();
            lootMessage();
            drawLives();
            endGame();
            nextRound();

        }

        function callAllRound2(){

            ctx.shadowColor = "black";
            ctx.shadowBlur = 5;
            ctx.shadowOffsetX = 5;
            ctx.shadowOffsetY = -5;


            ctx.webkitImageSmoothingEnabled = false;
            ctx.mozImageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            ctx.drawImage(document.getElementById("background"), 0, 0, canvas.width, canvas.height);

            countPoints();
            ctx.fillStyle = "white";
            ctx.font = "20px pixelFont";
            ctx.textAlign = "start";
            drawTreasure();
            collectTreasure();
            drawSquare();
            moveSquare();
            drawKey();
            collectKey();
            drawBat(bat1);
            drawBat(bat2);
            drawBat(bat3);
            drawBat(randomBat);
            drawBat(randomBat2);
            moveBat(bat1);
            moveBat(bat2);
            moveBat(bat3);
            moveByRandom(randomBat);
            moveByRandom(randomBat2);

            
            

            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.fillText("Score: " + score, 0, 24);
            ctx.fillText("🗝x"+ keys,190,24);
            lootMessage();
            keyMessage();
            drawLives();
            endGame();
            nextRound();

        }

        function callAllRound3(){
            ctx.shadowColor = "black";
            ctx.shadowBlur = 5;
            ctx.shadowOffsetX = 5;
            ctx.shadowOffsetY = -5;


            ctx.webkitImageSmoothingEnabled = false;
            ctx.mozImageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            ctx.drawImage(backgroundLevel3, 0, 0, canvas.width, canvas.height);

            countPoints();
            ctx.fillStyle = "white";
            ctx.font = "20px pixelFont";
            ctx.textAlign = "start";
            drawBridges();
            drawSquare();
            moveSquare();


            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.fillText("Score: " + score, 0, 24);
            ctx.fillText("🗝x"+ keys,190,24);
           
            drawLives();
            endGame();
            nextRound();
            bridgeCollision(bridge1);
            bridgeCollision(bridge2);
            lavaCollision();
            winGame();
            carriedByBridge = false
            

        }
        
        

        function drawSquare() {
            player.height = canvas.height / 10;
            player.width = canvas.width / 10;
            let squareColor = "red";
            ctx.drawImage(player.characterSprite, player.x, player.y);
            

        }

        function drawBat(bat){
            ctx.drawImage(batSprite,bat.x,bat.y,50,30);
        }

        function moveBat(bat){
            if(bat.x < player.x  + bat.distanceX){
                bat.x += bat.speedX;
            }

            if(bat.x > player.x + bat.distanceX){
                bat.x -= bat.speedX;
            }

            if(bat.y < player.y + bat.distanceY){
                bat.y += bat.speedY;
            }
            if(bat.y>player.y + bat.distanceY){
                bat.y -= bat.speedY;
            }
            batCollision(bat);
        }

        function batCollision(bat){
            if(player.x + 15 < bat.x + 35 && player.x + player.width > bat.x + 15 && player.y +10 <= bat.y + 20 && player.y + player.height>= bat.y && !invincibility){
                hurtsound.pause();
                hurtsound.currentTime = 0;
                hurtsound.play();
                lives -= 1;
                invincibility = true;
                setTimeout(function () { invincibility = false }, 700);
            }        
        }

        function randomGenerator(){
            randomNumber = Math.random();
        }

        function moveByRandom(bat){
            batCollision(bat);
            if(randomNumber < 0.4){
                bat.x += 1*bat.multiplierX;
                bat.y += 1*bat.multiplierY;
            } else if(randomNumber >= 0.4 && randomNumber < 0.6){
                bat.x += 0.8*bat.multiplierX;
                bat.y -= 1*bat.multiplierY;
            } else if(randomNumber >= 0.6 && randomNumber < 0.8){
                bat.x -= 1*bat.multiplierX;
                bat.y -= 0.8*bat.multiplierY;
            } else if(randomNumber >= 0.8){
                bat.x -= 1*bat.multiplierX;
                bat.Y +=1*bat.multiplierY;
            }
            if(bat.x > canvas.width-30){
                bat.x = canvas.width-30;
            }

            if(bat.x < 0){
                bat.x = 0;
            }

            if(bat.y > canvas.height-30){
                bat.y = canvas.height-30;
            }

            if(bat.y < 0){
                bat.y = 0;
            }
            
        }


        function moveSquare() {
            if (aPressed && player.x > 0) {
                if (player.x > obstacleX + obstacleWidth && player.x < obstacleX + obstacleWidth) {
                    player.x == obstacleX + obstacleWidth;
                } else {
                    player.x -= 2;
                }

            }
            if (dPressed && player.x < 9 * canvas.width / 10 && !isCollision) {
                player.x += 2;
            }
            if (wPressed && player.y > 0) {
                player.y -= 2;
            }
            if (sPressed && player.y < 9 * canvas.height / 10) {
                player.y += 2;
            }
            if (isCollision && kickback < 0) {
                player.x += kickback;
                kickback -= 1;
                if (kickback == -12) {
                    isCollision = false;
                }
            }
            if (isCollision && kickback > 0) {
                player.x += kickback;
                kickback += 1;
                if (kickback == 12) {
                    isCollision = false;
                }

            }
            if (isCollisionY && kickbackY > 0) {
                player.y += kickbackY;
                kickbackY += 1;
                if (kickbackY == 6) {
                    isCollisionY = false;
                    kickbackY = 0;
                }
            }
            if (isCollisionY && kickbackY < 0) {
                player.y += kickbackY;
                kickbackY -= 1;
                console.log(kickbackY)
                if (kickbackY == -6) {
                    isCollisionY = false;
                    kickbackY = 0;
                }
            }
        }

        function keyDownHandler(event) {
            if (event.keyCode === 65) {
                aPressed = true;
            }
            else if (event.keyCode === 68) {
                dPressed = true;
            }
            else if (event.keyCode === 87) {
                wPressed = true;
            }
            else if (event.keyCode === 83) {
                sPressed = true;
            }

        }


        function keyUpHandler(event) {
            if (event.keyCode === 65) {
                aPressed = false;
            }
            else if (event.keyCode === 68) {
                dPressed = false;
            }
            else if (event.keyCode === 87) {
                wPressed = false;
            }
            else if (event.keyCode === 83) {
                sPressed = false;
            }

        }

        function animateCharacter() {
            character = !character;
            player.characterSprite = (character == true) ? characterSprite2 : player.characterSprite = characterSprite1;
            

        }

        function animateBat(){
            bat = !bat;
            batSprite = (bat == true) ? document.getElementById("bat1") : document.getElementById("bat2"); 
        }

        function toggleBackground(){
            backgroundLavaOne = !backgroundLavaOne;
            backgroundLevel3 = (backgroundLavaOne == true) ? background1Level3 : background2Level3;
        }

        function drawTreasure() {

            if (!treasure.collectState) {
                ctx.webkitImageSmoothingEnabled = false;
                ctx.mozImageSmoothingEnabled = false;
                ctx.imageSmoothingEnabled = false;
                ctx.drawImage(document.getElementById("treasure"), treasure.x, treasure.y, 40, 40);
            }

        }
        function drawObstacle() {

            obstacleY2 = obstacleHeight + 60;
            ctx.webkitImageSmoothingEnabled = false;
            ctx.mozImageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            ctx.drawImage(document.getElementById("wall"), obstacleX, 0, obstacleWidth, obstacleHeight);
            ctx.drawImage(document.getElementById("wall"), obstacleX, obstacleY2, obstacleWidth, canvas.height);
            obstacleX -= 1;
            if (obstacleX < -30) {
                obstacleX = canvas.width + 50;
                obstacleHeight = 25 * Math.floor(Math.random() * 10);
                passedGate = false;
                treasure.x = 20 + Math.floor(Math.random() * 200);
                treasure.y = 20 + Math.floor(Math.random() * 350);
                treasure.collectState = false;
            }

        }

        


        function collision() {
            if (obstacleX < player.x + player.width && obstacleX > player.x + player.width - 4 && player.y < obstacleY + obstacleHeight - 10) {
                hurtsound.pause();
                hurtsound.currentTime = 0;
                hurtsound.play();
                console.log("collision");
                isCollision = true;
                kickback = -4;
                console.log("collision1");
                if (!invincibility) {
                    lives -= 1;
                    invincibility = true;
                    setTimeout(function () { invincibility = false }, 700);
                }

            }
            if (obstacleX < player.x + player.width && obstacleX >= player.x + player.width - 4 && obstacleY2 < player.y + player.height) {
                hurtsound.pause();
                hurtsound.currentTime = 0;
                hurtsound.play();
                console.log("collision");
                isCollision = true;
                kickback = -4;
                console.log("collision2");
                if (!invincibility) {
                    lives -= 1;
                    invincibility = true;
                    setTimeout(function () { invincibility = false }, 700);
                }

            }

           

            if (player.x < obstacleX + obstacleWidth && player.x + player.width > obstacleX && player.y <= obstacleY + obstacleHeight && player.y >= obstacleY + obstacleHeight - 2) {
                isCollisionY = true;
                kickbackY = 4;
            }
            if (player.x < obstacleX + obstacleWidth && player.x + player.width > obstacleX && player.y < obstacleY2 + 2 && player.y + player.height > obstacleY2) {
                isCollisionY = true;
                kickbackY = -4;
            }
            if (passedGate) {
                if (player.x < obstacleX + obstacleWidth) {
                    player.x = obstacleX + obstacleWidth;
                }
            }
        }

        function collectTreasure() {
            if (player.x < treasure.x + 40 && player.x + player.width > treasure.x && player.y < treasure.y + 40 && player.y + player.height > treasure.y && !treasure.collectState) {
                treasuresound.pause();
                treasuresound.currentTime = 0;
                treasuresound.play();
                treasure.collectState = true;
                score += 20;
                treasure.messageState = true;
                if(round==2 && treasure.collectState && !treasureCooldown){
                    treasureCooldown = true;
                    setTimeout(function(){
                        treasure.x = 20 + Math.floor(Math.random() * 200);
                        treasure.y = 20 + Math.floor(Math.random() * 350);
                        treasure.collectState = false;
                        treasureCooldown = false;
                    },500);
                }
            }
        }


        function drawLives() {
            ctx.fillStyle = "red";
            ctx.font = "30px pixelFont";

            if (lives == 0) {
                text = "♡♡♡"
            }
            if (lives == 1) {
                text = "❤♡♡"
            }

            if (lives == 2) {

                text = "❤❤♡";
            }

            if (lives == 3) {
                text = "❤❤❤";
            }
            ctx.fillText(text, 3 / 4 * canvas.width - 10, 28);
        }


        function endGame() {
            if (player.x + player.width < -30 || lives === 0) {
                
                lives = 0;
                gameSpeed = 10;
                deathsound.play();
                clearInterval(gameInterval);
                console.log(round);
                if(round==1){
                    gameInterval = setInterval(callAllRound1, 1000 / gameSpeed);
                }
                if(round==2){
                    gameInterval = setInterval(callAllRound2, 1000 / gameSpeed);
                }
                if(round==3){
                    gameInterval = setInterval(callAllRound3, 1000 / gameSpeed);
                }
                
                if(!gameover){
                    
                    gameover = true;
                    setTimeout(function () {
                    round = 1;
                    spacePressed = false;
                    clearInterval(gameInterval);
                    gameoversound.play();
                    ctx.fillStyle = "black";
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = "white";
                    ctx.font = "30px pixelFont";
                    ctx.textAlign = "center";
                    ctx.fillText("Game Over", canvas.width / 2, canvas.height / 2 - 50);
                    ctx.font = "20px pixelFont";
                    ctx.fillText("Your score: " + score, canvas.width / 2, canvas.height / 2 + 50);
                    ctx.fillText("Press space for retry", canvas.width / 2, canvas.height / 2 + 100);
                }, 1000);
                }
               
            }

        }

        function nextRound(){
            if(keys == keysRequired){
                console.log("next");
                round += 1;
                clearInterval(gameInterval);
                initialize();
                startsound.play();
                setTimeout(()=>{
                    ctx.fillStyle = "black";
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = "white";
                    ctx.font = "30px pixelFont";
                    ctx.textAlign = "center";
                    ctx.fillText("Next round!", canvas.width / 2, canvas.height / 2 - 50);
                },1000);
                if(round==2){
                    setTimeout(()=>gameInterval = setInterval(callAllRound2,1000/gameSpeed),2000);
                }
                if(round==3){
                    setTimeout(()=>gameInterval = setInterval(callAllRound3,1000/gameSpeed),2000);
                }
                
                

            }
        }


        

        function countPoints() {
            if (player.x > obstacleX + 10 && !passedGate) {
                gatesPassed += 1;
                gatesound.play();
                passedGate = true;
            }
            if (gatesPassed == 5) {
                gatesPassed = 0;
                gameSpeed = 1.1 * gameSpeed;
                clearInterval(gameInterval);
                gameInterval = setInterval(callAllRound1, 1000 / gameSpeed);
                console.log(gameSpeed);
            }
        }

        function lootMessage() {
            if (treasure.messageState) {

                ctx.fillText("LOOT!", treasure.x, treasure.y + 20);
                setTimeout(() => treasure.messageState = false, 500);
            }
        }

        function keyMessage(){
            if(displayKeyMessage){

                ctx.fillText("KEYS!",key.x,key.y);
                setTimeout(() => displayKeyMessage = false, 500);
            }
        }



        function drawBridges(){
            
            
            ctx.drawImage(bridgeImage,bridge1.x,bridge1.y,bridge1.width,bridge1.height);
            ctx.drawImage(bridgeImage,bridge2.x,bridge2.y,bridge2.width,bridge2.height);
            if(bridge1.y < 700){
                bridge1.y +=1;
            } else{
                bridge1.y = -100;
            }
            if(bridge2.y > -50){
                bridge2.y -= 1.2;
            } else(bridge2.y) = 700;
        }

        function lavaCollision(){
            
            if(player.x > 60 && !carriedByBridge && player.x < 260){
                lives = 0;
            }
            console.log(carriedByBridge);
        }

        let carriedByBridge = false;

        function bridgeCollision(bridge){
            
            if (bridge.x < player.x + player.width && bridge.x + bridge.width> player.x && player.y < bridge.y + bridge.height - 10 && bridge.y < player.y + player.height) {
                carriedByBridge = true;
            }
    }

        let jumpUp = true;
        let characterJump = 0;

        function winAnimation(){
            animateCharacter();
            player.y += characterJump;
            if(jumpUp){
                if(characterJump == 4){
                    jumpUp = false;
                }
                characterJump += 1;
                
            }
            if(!jumpUp){
                characterJump -= 1;
                if(characterJump == -4){
                    jumpUp = true;
                }
            }
            if(player.y>200){
                player.y = 200;
            }
            }
            
        let gameWon = false;
        
        function winGame(){
            if(player.x > 280 && player.y > 140 && player.y <200 && !gameWon){
                victorysound.play();
                gameWon = true;
                score += 1000;
                clearInterval(gameInterval);
                gameInterval = setInterval(()=>{
                    ctx.shadowColor = "black";
                ctx.shadowBlur = 5;
                ctx.shadowOffsetX = 5;
                ctx.shadowOffsetY = -5;


            ctx.webkitImageSmoothingEnabled = false;
            ctx.mozImageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            ctx.drawImage(backgroundLevel3, 0, 0, canvas.width, canvas.height);

            countPoints();
            ctx.fillStyle = "white";
            ctx.font = "20px pixelFont";
            ctx.textAlign = "start";
            drawBridges();
            drawSquare();
            winAnimation();


            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.fillText("Score: " + score, 0, 24);
            ctx.fillText("🗝x"+ keys,190,24);
           
            drawLives();
                },1000/60);
                setTimeout(()=>{
                    clearInterval(gameInterval);
                    ctx.fillStyle ="black";
                    ctx.fillRect(0,0,canvas.width,canvas.height);
                    ctx.fillStyle="white";
                    ctx.textAlign = "center";
                    ctx.font = "30px pixelFont";
                    ctx.fillText("You win!",canvas.width/2,canvas.height/2);
                },2000)
                
            }
        }




        const burgerMenu = document.getElementById("burger-menu");
        let burgerMenuShowing = false;

        function showMenu() {
            burgerMenuShowing = !burgerMenuShowing;
            if (burgerMenuShowing) {
                burgerMenu.style.height = "100vh";
                burgerMenu.style.opacity = "0.99";
                burgerMenu.style.zIndex = "2500";
                hamburger.style.position = "fixed";
            }
            else {
                burgerMenu.style.height = "0vh";
                burgerMenu.style.opacity = "0";
                burgerMenu.style.zIndex = "-3000";
                hamburger.style.position = "absolute";
            }
        }


    </script>
</body>

</html>