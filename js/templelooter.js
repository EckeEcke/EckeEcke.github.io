const canvas=document.getElementById("game-canvas"),ctx=canvas.getContext("2d"),canvasWidth=canvas.width,canvasHeight=canvas.height,overlay=document.getElementById("damage-overlay"),buttonsPressed={a:!1,s:!1,w:!1,d:!1},sounds={death:{src:document.getElementById("death"),playOnce:!0},start:{src:document.getElementById("start-sound"),playOnce:!0},gameOver:{src:document.getElementById("gameover-sound"),playOnce:!0},treasure:{src:document.getElementById("treasure-sound"),playOnce:!1},key:{src:document.getElementById("key-sound"),playOnce:!1},gate:{src:document.getElementById("gate-sound"),playOnce:!1},hurt:{src:document.getElementById("hurt-sound"),playOnce:!0},victory:{src:document.getElementById("victory-sound"),playOnce:!0},bat:{src:document.getElementById("bat-sound"),playOnce:!0},drums:{src:document.getElementById("drum-sound"),playOnce:!0},timer:{src:document.getElementById("timer-sound"),playOnce:!0}},sprites={player1:document.getElementById("character1"),player2:document.getElementById("character2"),bat1:document.getElementById("bat1"),bat2:document.getElementById("bat2"),backgrounds:{ruin:document.getElementById("background"),lava1:document.getElementById("lava-background1"),lava2:document.getElementById("lava-background2")},items:{treasure:document.getElementById("treasure"),key:document.getElementById("key"),wall:document.getElementById("wall"),bridge:document.getElementById("bridge")}},intervals={player:null,bat:null,game:null,key:null,lavaBackground:null,time:null},states={notStarted:"game was not started yet",wallLevel:"obstacle wall and one bat",batLevel:"level with too many bats",lavaLevel:"bridges over lava level",nextRoundMessage:"next round message is being displayed",gameOverMessage:"game over message is being displayed",victoryMessage:"victory message is being displayed"},gameState={keysRequired:5,gameOver:!1,gameSpeed:120,round:1,volume:1,state:states.notStarted,randomNumber:null,batState1:!0,batSprite:sprites.bat1,backgroundLavaLevel:sprites.backgrounds.lava1,background1Lava:!0,timer:99},player1={x:0,y:0,width:0,height:0,characterSprite:"",sprite1:!0,invincibility:!1,keys:0,isCollision:{x:!1,y:!1},passedGate:!1,score:0,lives:3,carriedByBridge:!1,blockMovementLeft:!1,kickback:{x:0,y:0}},enemies={obstacle:{x:canvasWidth+200,y:0,y2:0,width:30,height:0},bats:[{x:700,y:100,width:50,height:30,distanceX:0,distanceY:0,speedX:.5,speedY:.5},{x:700,y:400,width:50,height:30,distanceX:-30,distanceY:10,speedX:.5,speedY:.8},{x:500,y:100,width:50,height:30,distanceX:30,distanceY:10,speedX:.8,speedY:.5}],randomBats:[{x:200,y:200,width:50,height:30,multiplierX:1,multiplierY:1},{x:300,y:50,width:50,height:30,multiplierX:-1,multiplierY:1}]},items={treasure:{x:0,y:0,width:40,height:40,collectMessage:"LOOT!",messagteState:!1,collected:!1,coolDown:!1},key:{x:0,y:0,collectMessage:"KEY!",messageState:!1,collected:!1,showKey:!1},bridge1:{x:84,y:100,width:100,height:50},bridge2:{x:192,y:700,width:100,height:50}};function movePlayer(){navigator.getGamepads()[0]!==null&&movePlayerGamepad(),buttonsPressed.a&&player1.x>0&&(player1.x>enemies.obstacle.x+enemies.obstacle.width&&player1.x<enemies.obstacle.x+enemies.obstacle.width?player1.x=enemies.obstacle.x+enemies.obstacle.width:player1.x-=2),buttonsPressed.d&&player1.x<9*canvasWidth/10&&!player1.isCollision.x&&(player1.x+=2),buttonsPressed.w&&player1.y>25&&(player1.y-=2),buttonsPressed.s&&player1.y<9*canvasHeight/10&&(player1.y+=2),player1.isCollision.x&&(player1.x+=player1.kickback.x,player1.kickback.x-=1,(player1.kickback.x===-12||player1.kickback.x===12)&&(player1.isCollision.x=!1,player1.kickback.x=0)),player1.isCollision.y&&(player1.y+=player1.kickback.y,player1.kickback.y+=1,(player1.kickback.y===6||player1.kickback.y===-6)&&(player1.isCollision.y=!1,player1.kickback.y=0))}function movePlayerTouch(){touchControls.active&&(touchControls.x-80<player1.x&&(player1.x-=2,player1.x<0&&(player1.x=0)),touchControls.x-80>player1.x&&(player1.x+=2,player1.x>canvasWidth&&(player1.x=canvasWidth-10)),touchControls.y-150<player1.y&&(player1.y-=2,player1.y<0&&(player1.y=0)),touchControls.y-150>player1.y&&(player1.y+=2,player1.y>canvasHeight-20&&(player1.y=canvasHeight-20)))}function changeTouchPosition(e){touchControls.active=!0,touchControls.x=e.targetTouches?e.targetTouches[0].pageX-overlay.offsetLeft:e.offsetX,touchControls.y=e.targetTouches?e.targetTouches[0].pageY-overlay.offsetTop:e.offsetY}function movePlayerGamepad(){navigator.getGamepads()[0].buttons[14].pressed&&player1.x>0&&(player1.x>enemies.obstacle.x+enemies.obstacle.width&&player1.x<enemies.obstacle.x+enemies.obstacle.width?player1.x=enemies.obstacle.x+enemies.obstacle.width:player1.x-=2),navigator.getGamepads()[0].buttons[15].pressed&&player1.x<9*canvasWidth/10&&!player1.isCollision.x&&(player1.x+=2),navigator.getGamepads()[0].buttons[12].pressed&&player1.y>25&&(player1.y-=2),navigator.getGamepads()[0].buttons[13].pressed&&player1.y<9*canvasHeight/10&&(player1.y+=2)}function resetPlayerPosition(){player1.x=0,player1.y=canvasHeight/2}function handlePlayer(){movePlayerTouch(),movePlayer(),collision()}function animateCharacter(){player1.sprite1=!player1.sprite1,player1.characterSprite=player1.sprite1?sprites.player2:sprites.player1}function handleInvincibility(){player1.invincibility||(player1.lives-=1,overlay.style.opacity=.3,player1.invincibility=!0,setTimeout(function(){overlay.style.opacity=0},200),setTimeout(function(){player1.invincibility=!1},700))}function collision(){enemies.obstacle.x<player1.x+player1.width&&enemies.obstacle.x>=player1.x+player1.width-4&&(player1.y<enemies.obstacle.y+enemies.obstacle.height-10||enemies.obstacle.y2<player1.y+player1.height)&&(playSound(sounds.hurt),player1.isCollision.x=!0,player1.kickback.x=-4),player1.x<enemies.obstacle.x+enemies.obstacle.width&&player1.x+player1.width>enemies.obstacle.x&&(player1.y<=enemies.obstacle.y+enemies.obstacle.height&&player1.y>=enemies.obstacle.y+enemies.obstacle.height-2&&(player1.isCollision.y=!0,player1.kickback.y=4),player1.y<enemies.obstacle.y2+2&&player1.y+player1.height>enemies.obstacle.y2&&(player1.isCollision.y=!0,player1.kickback.y=-4)),player1.passedGate&&player1.x<enemies.obstacle.x+enemies.obstacle.width&&(player1.x=enemies.obstacle.x+enemies.obstacle.width)}function keyStatusToggle(){items.key.showKey=!0,items.key.collected=!1,items.key.x=20+Math.floor(Math.random()*300),items.key.y=25+Math.floor(Math.random()*300)}function collectKey(){player1.x<items.key.x+40&&player1.x+player1.width>items.key.x&&player1.y<items.key.y+25&&player1.y+player1.height>items.key.y&&!items.key.collected&&(playSound(sounds.key),player1.keys+=1,items.key.collected=!0,items.key.messageState=!0,setTimeout(()=>items.key.messageState=!1,500))}function collectTreasure(){player1.x<items.treasure.x+items.treasure.width&&player1.x+player1.width>items.treasure.x&&player1.y<items.treasure.y+items.treasure.height&&player1.y+player1.height>items.treasure.y&&!items.treasure.collected&&(playSound(sounds.treasure),items.treasure.collected=!0,player1.score+=20,items.treasure.messageState=!0,setTimeout(()=>items.treasure.messageState=!1,500),gameState.round===2&&items.treasure.collected&&!items.treasure.coolDown&&(items.treasure.coolDown=!0,setTimeout(function(){items.treasure.x=20+Math.floor(Math.random()*200),items.treasure.y=20+Math.floor(Math.random()*350),items.treasure.collected=!1,items.treasure.coolDown=!1},500)))}function moveWall(){enemies.obstacle.y2=enemies.obstacle.height+60,enemies.obstacle.x-=1,enemies.obstacle.x<-30&&(enemies.obstacle.x=canvasWidth+50,enemies.obstacle.height=25*Math.floor(Math.random()*10)+25,player1.passedGate=!1,items.treasure.x=25+Math.floor(Math.random()*200),items.treasure.y=25+Math.floor(Math.random()*300),items.treasure.collected=!1)}function moveBat(e){let t=1;gameState.randomNumber>.6&&(t=2),e.x<player1.x+e.distanceX&&(e.x+=e.speedX/t),e.x>player1.x+e.distanceX&&(e.x-=e.speedX/t),e.y<player1.y+e.distanceY&&(e.y+=e.speedY/t),e.y>player1.y+e.distanceY&&(e.y-=e.speedY/t),batCollision(e)}function animateBat(){gameState.batState1=!gameState.batState1,gameState.batSprite=gameState.batState1?sprites.bat1:sprites.bat2}function batCollision(e){player1.x+15<e.x+35&&player1.x+player1.width>e.x+15&&player1.y+10<=e.y+20&&player1.y+player1.height>=e.y&&!player1.invincibility&&(playSound(sounds.hurt),playSound(sounds.bat),handleInvincibility())}function randomGenerator(){gameState.randomNumber=Math.random()}function moveBatByRandom(e){gameState.randomNumber<.4?(e.x+=1*e.multiplierX,e.y+=1*e.multiplierY):gameState.randomNumber>=.4&&gameState.randomNumber<.6?(e.x+=.8*e.multiplierX,e.y-=1*e.multiplierY):gameState.randomNumber>=.6&&gameState.randomNumber<.8?(e.x-=1*e.multiplierX,e.y-=.8*e.multiplierY):(e.x-=1*e.multiplierX,e.Y+=1*e.multiplierY),e.x>canvasWidth-30&&(e.x=canvasWidth-30),e.x<20&&(e.x=20),e.y>canvasHeight-30&&(e.y=canvasHeight-30),e.y<20&&(e.y=20),batCollision(e)}function runWallLevel(){checkGatePass(),collectTreasure(),collectKey(),moveWall(),handlePlayer(),moveBat(enemies.bats[0]),endGame(),nextRound()}function runBatLevel(){collectTreasure(),handlePlayer(),collectKey(),enemies.bats.forEach(e=>moveBat(e)),enemies.randomBats.forEach(e=>moveBatByRandom(e)),endGame(),nextRound()}function runLavaLevel(){moveBridges(),movePlayer(),movePlayerTouch(),removeShadow(),drawScoreBoard(),endGame(),nextRound(),bridgeCollision(items.bridge1,1,100),bridgeCollision(items.bridge2,-1.2,-100),lavaCollision(),winGame(),player1.carriedByBridge=!1}function toggleBackground(){gameState.background1Lava=!gameState.background1Lava,gameState.backgroundLavaLevel=gameState.background1Lava===!0?sprites.backgrounds.lava1:sprites.backgrounds.lava2}function endGame(){(player1.x+player1.width<-30||player1.lives===0||gameState.timer<=0)&&(player1.lives=0,gameState.gameSpeed=10,playSound(sounds.death),clearInterval(intervals.game),clearInterval(intervals.time),pauseSound(sounds.timer),gameState.gameover||(pauseSound(sounds.drums),gameState.gameover=!0,setTimeout(function(){gameState.round=1,touchBTNStart.disabled=!1,touchBTNStart.style.display="block",clearInterval(intervals.game),playSound(sounds.gameOver),gameState.state=states.gameOverMessage},1e3)))}function nextRound(){player1.keys===gameState.keysRequired&&(pauseSound(sounds.drums),touchControls.active=!1,gameState.round+=1,gameState.state=states.nextRoundMessage,clearInterval(intervals.game),clearInterval(intervals.time),pauseSound(sounds.timer),gameState.timer=60,initialize(),playSound(sounds.start),setTimeout(()=>{intervals.time=setInterval(runDownTimer,1e3),playSound(sounds.drums),gameState.round===2&&(gameState.state=states.batLevel,intervals.game=setInterval(runBatLevel,1e3/gameState.gameSpeed)),gameState.round===3&&(gameState.state=states.lavaLevel,intervals.game=setInterval(runLavaLevel,1e3/gameState.gameSpeed),intervals.lavaBackground=setInterval(toggleBackground,1e3))},2e3))}function checkGatePass(){player1.x>enemies.obstacle.x+10&&!player1.passedGate&&(playSound(sounds.gate),player1.passedGate=!0)}function moveBridges(){items.bridge1.y<canvasHeight+200?items.bridge1.y+=1:items.bridge1.y=-200,items.bridge2.y>-200?items.bridge2.y-=1.2:items.bridge2.y=700}function lavaCollision(){(player1.x>60&&!player1.carriedByBridge&&player1.x<260||player1.y>canvasHeight+20||player1.y<-20)&&(player1.lives-=1,overlay.style.opacity=.3,setTimeout(function(){overlay.style.opacity=0},200),player1.lives>=1&&!player1.blockMovementLeft&&(player1.blockMovementLeft=!0,setTimeout(()=>{player1.blockMovementLeft=!1},500)),playSound(sounds.hurt)),player1.blockMovementLeft&&resetPlayerPosition()}function bridgeCollision(e,t,i){e.x<player1.x+player1.width&&e.x+e.width>player1.x&&(player1.y+player1.height-10<e.y+e.height-10&&e.y<player1.y+player1.height||player1.y+player1.height-10<e.y+i+e.height-10&&e.y+i<player1.y+player1.height)&&(player1.carriedByBridge=!0),e.x<player1.x+player1.width/2&&e.x+e.width>player1.x+player1.width/2&&(player1.y+=t)}let jumpUp=!0,characterJump=0;function jumpingPlayerAnimation(){animateCharacter(),player1.y+=characterJump,jumpUp&&(jumpUp=characterJump<4,characterJump+=1),jumpUp||(characterJump-=1,jumpUp=characterJump<-4),player1.y=player1.y>200?200:player1.y}let gameWon=!1;function winGame(){player1.x>280&&player1.y>140&&player1.y<200&&!gameWon&&(pauseSound(sounds.drums),pauseSound(sounds.timer),playSound(sounds.victory),gameWon=!0,player1.score+=500,clearInterval(intervals.game),clearInterval(intervals.time),intervals.game=setInterval(()=>{runVictoryAnimation()},1e3/60),setTimeout(()=>{gameState.state=states.victoryMessage},2e3))}function runVictoryAnimation(){jumpingPlayerAnimation()}function drawBridges(){ctx.drawImage(sprites.items.bridge,items.bridge1.x,items.bridge1.y,items.bridge1.width,items.bridge1.height),ctx.drawImage(sprites.items.bridge,items.bridge1.x,items.bridge1.y+100,items.bridge1.width,items.bridge1.height),ctx.drawImage(sprites.items.bridge,items.bridge2.x,items.bridge2.y,items.bridge2.width,items.bridge2.height),ctx.drawImage(sprites.items.bridge,items.bridge2.x,items.bridge2.y-100,items.bridge2.width,items.bridge2.height)}function drawVictoryScreen(){clearInterval(intervals.game),blackBackground(),ctx.fillStyle="white",ctx.textAlign="center",ctx.font="30px pixelFont",ctx.fillText("You win!",canvasWidth/2,canvasHeight/2),ctx.font="24px pixelFont",ctx.fillText("Your score: "+player1.score,canvasWidth/2,canvasHeight/2+60)}function drawNextRoundScreen(){blackBackground(),ctx.fillStyle="white",ctx.font="30px pixelFont",ctx.textAlign="center",ctx.fillText("Next round!",canvasWidth/2,canvasHeight/2)}function drawGameOverScreen(){blackBackground(),ctx.fillStyle="white",ctx.font="30px pixelFont",ctx.textAlign="center",ctx.fillText("Game Over",canvasWidth/2,canvasHeight/2-50),ctx.font="20px pixelFont",ctx.fillText("Your score: "+player1.score,canvasWidth/2,canvasHeight/2+50),ctx.fillText("Hit Start for retry",canvasWidth/2,canvasHeight/2+100)}function drawIntroMessage(){blackBackground(),ctx.fillStyle="white",ctx.font="30px pixelFont",ctx.textAlign="center",ctx.fillText("Get ready",canvasWidth/2,canvasHeight/2)}function drawLives(){switch(ctx.save(),player1.lives){case 0:text="\u2661\u2661\u2661";break;case 1:text="\u2764\u2661\u2661";break;case 2:text="\u2764\u2764\u2661";break;default:text="\u2764\u2764\u2764"}ctx.fillStyle="red",ctx.font="24px pixelFont",ctx.textAlign="right",ctx.fillText(text,canvasWidth-5,24),ctx.restore()}function drawPickupMessage(e){e.messageState&&(ctx.fillStyle="white",ctx.font="20px pixelFont",ctx.textAlign="start",ctx.fillText(e.collectMessage,e.x,e.y+20))}function drawManualScreen(){blackBackground(),ctx.textAlign="center",ctx.font="20px pixelFont",ctx.fillStyle="white",ctx.fillText("Collect \u{1F5DD} x 5",canvasWidth/2,50),ctx.fillText("Controls",canvasWidth/2,120),ctx.fillText("W = UP",canvasWidth/2,170),ctx.fillText("A = Left",canvasWidth/2,200),ctx.fillText("D = Right",canvasWidth/2,230),ctx.fillText("S = DOWN",canvasWidth/2,260),ctx.fillText("or",canvasWidth/2,310),ctx.fillText("use gamepad",canvasWidth/2,360)}function drawPlayer(){player1.height=canvasHeight/10,player1.width=canvasWidth/10,ctx.drawImage(player1.characterSprite,player1.x,player1.y)}function drawKey(){!items.key.collected&&items.key.showKey&&(disableImageSmoothing(),ctx.drawImage(sprites.items.key,items.key.x,items.key.y,40,24))}function drawTreasure(){items.treasure.collected||(disableImageSmoothing(),ctx.drawImage(sprites.items.treasure,items.treasure.x,items.treasure.y,items.treasure.width,items.treasure.height))}function drawBat(e){ctx.drawImage(gameState.batSprite,e.x,e.y,e.width,e.height)}function blackBackground(){ctx.fillStyle="black",ctx.fillRect(0,0,canvasWidth,canvasHeight)}function showShadow(){ctx.shadowColor="black",ctx.shadowBlur=5,ctx.shadowOffsetX=5,ctx.shadowOffsetY=-5}function removeShadow(){ctx.shadowBlur=0,ctx.shadowOffsetX=0,ctx.shadowOffsetY=0}function drawScoreBoard(){ctx.fillStyle="white",ctx.font="20px pixelFont",ctx.textAlign="start";const e="Score "+String(player1.score).padStart(4,"0")+" \u{1F5DD}x"+player1.keys;ctx.fillText(e,5,24),gameState.timer<20&&(ctx.fillStyle="orange"),gameState.timer<10&&(ctx.fillStyle="red"),ctx.fillText("\u23F1"+gameState.timer,255,24),drawLives()}function disableImageSmoothing(){ctx.webkitImageSmoothingEnabled=!1,ctx.mozImageSmoothingEnabled=!1,ctx.imageSmoothingEnabled=!1}function drawWall(){disableImageSmoothing(),ctx.drawImage(sprites.items.wall,enemies.obstacle.x,0,enemies.obstacle.width,enemies.obstacle.height),ctx.drawImage(sprites.items.wall,enemies.obstacle.x,enemies.obstacle.y2,enemies.obstacle.width,canvasHeight)}function drawAll(){gameState.state===states.notStarted&&drawIntroMessage(),gameState.state===states.wallLevel&&drawWallLevel(),gameState.state===states.batLevel&&drawBatLevel(),gameState.state===states.lavaLevel&&drawLavaLevel(),gameState.state===states.nextRoundMessage&&drawNextRoundScreen(),gameState.state===states.gameOverMessage&&drawGameOverScreen(),gameState.state===states.victoryMessage&&drawVictoryScreen(),requestAnimationFrame(drawAll)}function drawWallLevel(){showShadow(),disableImageSmoothing(),ctx.drawImage(sprites.backgrounds.ruin,0,0,canvasWidth,canvasHeight),drawTreasure(),drawKey(),drawPlayer(),drawWall(),drawBat(enemies.bats[0]),removeShadow(),drawPickupMessage(items.key),drawPickupMessage(items.treasure),drawScoreBoard()}function drawBatLevel(){showShadow(),disableImageSmoothing(),ctx.drawImage(sprites.backgrounds.ruin,0,0,canvasWidth,canvasHeight),drawPlayer(),drawTreasure(),drawKey(),enemies.bats.forEach(e=>drawBat(e)),enemies.randomBats.forEach(e=>drawBat(e)),removeShadow(),drawPickupMessage(items.treasure),drawPickupMessage(items.key),drawScoreBoard()}function drawLavaLevel(){showShadow(),disableImageSmoothing(),ctx.drawImage(gameState.backgroundLavaLevel,0,0,canvasWidth,canvasHeight),drawBridges(),drawPlayer(),removeShadow(),drawScoreBoard()}window.onload=function(){drawManualScreen(),addEventListeners(),intervals.player=setInterval(animateCharacter,200),intervals.bat=setInterval(animateBat,100),intervals.key=setInterval(keyStatusToggle,5e3)};function addEventListeners(){document.addEventListener("keydown",keyDownHandler,!1),document.addEventListener("keyup",keyUpHandler,!1),overlay.addEventListener("touchstart",changeTouchPosition,!1),overlay.addEventListener("touchmove",changeTouchPosition,!1),overlay.addEventListener("touchend",function(){touchControls.active=!1}),touchBTNStart.addEventListener("click",()=>{touchBTNStart.disabled||(touchBTNStart.disabled=!0,touchBTNStart.style.display="none",initialize(),requestAnimationFrame(drawAll),setTimeout(startGame,1500),playSound(sounds.start))})}window.addEventListener("gamepad1Connected",function(e){console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",e.gamepad.index,e.gamepad.id,e.gamepad.buttons.length,e.gamepad.axes.length)});const touchBTNStart=document.getElementById("touch-BTN-start");function startGame(){sounds.drums.loop=!0,playSound(sounds.drums),gameState.state=states.wallLevel,gameState.timer=60,player1.score=0,touchBTNStart.disabled=!0,initialize(),intervals.game=setInterval(runWallLevel,1e3/gameState.gameSpeed),intervals.time=setInterval(runDownTimer,1e3),randomInterval=setInterval(randomGenerator,500)}function runDownTimer(){gameState.timer<=0||(gameState.timer-=1,gameState.timer===10&&playSound(sounds.timer))}function setVolume(e){gameState.volume=e===0?0:e*2/10,Array.from(document.getElementsByClassName("volume-item")).forEach(a=>{a.innerHTML=a.dataset.value>e?"&#9645;":"&#11036;"}),document.querySelectorAll("audio").forEach(a=>a.volume=gameState.volume)}function playSound(e){e.playOnce||(e.src.pause(),e.src.currentTime=0),e.src.play()}function pauseSound(e){e.src.pause(),e.src.currentTime=0}function keyDownHandler(e){switch(e.key){case"a":case"ArrowLeft":buttonsPressed.a=!0;break;case"d":case"ArrowRight":buttonsPressed.d=!0;break;case"w":case"ArrowUp":buttonsPressed.w=!0;break;case"s":case"ArrowDown":buttonsPressed.s=!0;break}}function keyUpHandler(e){switch(e.key){case"a":case"ArrowLeft":buttonsPressed.a=!1;break;case"d":case"ArrowRight":buttonsPressed.d=!1;break;case"w":case"ArrowUp":buttonsPressed.w=!1;break;case"s":case"ArrowDown":buttonsPressed.s=!1;break}}function initialize(){player1.keys=0,gameState.keysRequired=5,touchBTNStart.disabled=!0,player1.x=0,player1.y=canvasHeight/2,touchControls.x=0,touchControls.y=canvasHeight/2,touchControls.active=!1,enemies.obstacle.x=canvasWidth+200,enemies.obstacle.y=0,enemies.obstacle.height=25*Math.floor(Math.random()*10)+25,player1.isCollision={x:!1,y:!1},items.treasure.x=10+Math.floor(Math.random()*200),items.treasure.y=50,items.treasure.collected=!1,player1.passedGate=!1,gameState.gameSpeed=120,player1.lives=3,gameState.gameover=!1,gameWon=!1,enemies.bats[0]={x:700,y:100,width:50,height:30,distanceX:0,distanceY:0,speedX:.5,speedY:.5},enemies.bats[1]={x:700,y:400,width:50,height:30,distanceX:-30,distanceY:10,speedX:.5,speedY:.8},enemies.bats[2]={x:500,y:100,width:50,height:30,distanceX:30,distanceY:10,speedX:.8,speedY:.5},enemies.randomBats[0]={x:200,y:200,width:50,height:30,multiplierX:1,multiplierY:1},enemies.randomBats[1]={x:300,y:50,width:50,height:30,multiplierX:-1,multiplierY:1}}const touchControls={x:null,y:null,active:!1};
