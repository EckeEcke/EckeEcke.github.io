
<html>
<head>
  <meta name="viewport" content="width=device-width, maximum-scale=1.0">
  <title>Javascript Space Shooter ðŸ‘¾</title>
  <link rel="stylesheet" href="css/space-shooter.css">
  <link rel="icon" type="image/png" href="images/favicon.png"/>
</head>

<body>

  <a href="index.html" style="display: block">
    <img id="logo" src="images/logo-chris.png">
  </a>  

  <center>
    <br>
    <h2>Space Shooter</h2>
    <article class="too-small">
      <br>
      If you can read this, your screen is to small! You can play this game on your PC in full screen mode!
    </article>
    <br>
    <button id="startButton" onclick="startGame()">
    ðŸ‘¾ Start ðŸ‘¾
    </button>
    <br><br>
  <article id="description">
      I wanted to experiment with my learnings from building Pong and created this game 
      from scratch. Just for fun and getting some practise. To make it more visually appealing 
      I implemented images to the canvas. There are also sound effects and button to turn sound on or off.
      <br><br>
      Controls
      <br>
      LEFT: A | RIGHT: D | SHOOT: W
  </article>

  <canvas id="game-canvas" width= "400px" height= "600px">

  </canvas>
  </center>

<button onclick="soundControl()" id="sound-button">&#128263;</button>
<audio src="sounds/laser.wav" id="laser"></audio>
<audio src="sounds/win-shooter.wav" id="win-shooter"></audio>
<audio src="sounds/lose-shooter.wav" id="lose-shooter"></audio>
<audio src="sounds/hit.wav" id="hit"></audio>

<button id="hamburger" onclick="showMenu()">
  <div class="line1"></div>
  <div class="line2"></div>
  <div class="line3"></div>
</button>

<div id="burger-menu">
  <ul>
        <li>
          <a href="index.html">Home</a>
        </li>
        <hr class="nav-line">
        <li>
          <a href="https://nifty-hopper-c1da01.netlify.app/" target="_blank">React Travel Blog</a>
        </li>
        <hr class="nav-line">
        <li>
          <a href="shooter.html">JS Space Shooter</a>
        </li>
        <hr class="nav-line">
        <li>
          <a href="pong.html">JS Pong</a>
        </li>
        <hr class="nav-line">
        <li>
          <a href="https://adoring-galileo-71fde2.netlify.app/">React Todo App</a>
        </li>
      </ul>
</div>
<img id="spaceship" src="images/spaceship.png" style="display: none; background: transparent;">
<img id="snake" src="images/snake.png" style="display: none; background: transparent;">
<img id="snake-head" src="images/snake-head.png" style="display: none; background: transparent;">
<script>

  let canvas;
  let canvasContext;
  let spaceshipX = 150;
  const spaceshipY = 550;
  let canonY = 520;
  let canonX = spaceshipX+50;
  let shotX;
  let shotY;
  let aPressed = false;
  let dPressed = false;
  let wPressed = false;
  let shotFired = false;

  let score = 0;
  

  let snakeX = 0;
  let snakeX2 = 50;
  let snakeX3 = 100;
  let snakeX4 = 150;
  let snakeX5 = 200;
  let snakeX6 = 250;
  let snakeX7 = 300;
  let snakeX8 = 350;

  let snakeY = 0;
  let snakeY2 = 0;
  let snakeY3 = 0;
  let snakeY4 = 0;
  let snakeY5 = 0;
  let snakeY6 = 0;
  let snakeY7 = 0;
  let snakeY8 = 0;

  let snakeSpeed = 10;
  let snakeSpeed2 = 10;
  let snakeSpeed3 = 10;
  let snakeSpeed4 = 10;
  let snakeSpeed5 = 10;
  let snakeSpeed6 = 10;
  let snakeSpeed7 = 10;
  let snakeSpeed8 = 10;

  let snakeLives = 8;

  let gameSpeed = 30;

  let sounds = document.getElementsByTagName("audio");

  let intervalGame;

  let intervalSnake;

  let highScore = 0;

  let isHighscore = false;


  sounds.muted = true;

  function soundControl() {
    if (sounds.muted == true){
      sounds.muted = false;
      document.getElementById("sound-button").innerHTML="&#128266;";
    } else {
      sounds.muted = true;
      document.getElementById("sound-button").innerHTML="&#128263;";
    }
    console.log(sounds);
  }

  window.onload = function () {
    canvas = document.getElementById("game-canvas");
    canvasContext = canvas.getContext("2d");
    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);
  }

  function startGame(){
    canvasContext.fillStyle = "black"; /*black background*/
    canvasContext.fillRect(0,0,canvas.width,canvas.height);
    canvasContext.font = "24px retro";
    canvasContext.fillStyle = "limegreen";
    canvasContext.fillText("Save Earth!", 100, canvas.height/2);
    setTimeout(cooldown, 2000);
    function cooldown(){
      intervalGame = setInterval(callAll, 1000/140);
      intervalSnake = setInterval(moveSnake, gameSpeed);
    }
    document.getElementById("startButton").disabled = true;
    document.getElementById("startButton").innerHTML = "Good Luck";
    document.getElementById("description").style.display = "none";
  }

  function setScore(){
    canvasContext.font = "24px retro";
    canvasContext.fillStyle = "limegreen";
    canvasContext.fillText("Score", 12, 30);
    canvasContext.font = "24px retro";
    canvasContext.fillStyle = "white";
    canvasContext.fillText(score, 12, 60);
    canvasContext.font = "24px retro";
    canvasContext.fillStyle = "limegreen";
    canvasContext.fillText("Hi-Score", 25+canvas.width/2, 30);
    canvasContext.font = "24px retro";
    canvasContext.fillStyle = "white";
    canvasContext.fillText(highScore, 25+canvas.width/2, 60);

    if(score>highScore){
      highScore = score;
      isHighscore = true;
    }
  }



  function callAll(){
    drawEverything();
    moveShip();
    shoot();
    moveShot();
    hitDetection();
    setScore();
  }

  function drawEverything() {

    canvasContext.fillStyle = "black"; /*black background*/
    canvasContext.fillRect(0,0,canvas.width,canvas.height);
    canvasContext.fillStyle = "limegreen"; /*defense line*/
    canvasContext.fillRect(0,canvas.height*0.8,canvas.width,1);

    canvasContext.fillStyle = "limegreen"; /*canon*/
    canvasContext.fillRect(canonX,canonY,10,canonY);
    canvasContext.fillstyle ="green"; /*spaceship*/
    canvasContext.fillRect(spaceshipX,spaceshipY,100,50);

    canvasContext.drawImage(document.getElementById("spaceship"),spaceshipX,spaceshipY-60,100,130);

    canvasContext.fillstyle ="red"; /*shot*/
    canvasContext.fillRect(shotX,shotY,10,20);




    if (snakeLives >=1){
      canvasContext.drawImage(document.getElementById("snake-head"),snakeX,snakeY,50,50);
    }

    if (snakeLives >= 2){
      canvasContext.drawImage(document.getElementById("snake"),snakeX2,snakeY2,50,50);
    }

    if (snakeLives >= 3){
      canvasContext.drawImage(document.getElementById("snake"),snakeX3,snakeY3,50,50);
    }

    if (snakeLives >= 4){
      canvasContext.drawImage(document.getElementById("snake"),snakeX4,snakeY4,50,50);
    }

    if (snakeLives >= 5){
      canvasContext.drawImage(document.getElementById("snake"),snakeX5,snakeY5,50,50);
    }

    if (snakeLives >= 6){
      canvasContext.drawImage(document.getElementById("snake"),snakeX6,snakeY6,50,50);
    }

    if (snakeLives >= 7){
      canvasContext.drawImage(document.getElementById("snake"),snakeX7,snakeY7,50,50);
    }

    if (snakeLives == 8){
      canvasContext.drawImage(document.getElementById("snake"),snakeX8,snakeY8,50,50);
    }

  }

  function moveShip(){
    if (aPressed) {
      spaceshipX -= 5;
      canonX -= 5;
    }
    if (spaceshipX < 0){
      spaceshipX = 0;
      canonX = 50;
    }

    if (dPressed){
      spaceshipX += 5;
      canonX += 5;
    }

    if (spaceshipX>300){
      spaceshipX = 300;
      canonX = 350;
    }
  }

  function keyDownHandler (event) {
    if(event.keyCode === 65) {
      aPressed = true;
    }
    else if (event.keyCode === 68) {
      dPressed = true;
    }
    else if (event.keyCode === 87) {
      wPressed = true;
    }
  }

  function keyUpHandler (event) {
    if(event.keyCode === 65) {
      aPressed = false;
    }
    else if (event.keyCode === 68) {
      dPressed = false;
    }
    else if (event.keyCode === 87) {
      wPressed = false;
    }
  }


  function shoot(){
    if(wPressed && !shotFired){
      shotFired = true;
      shotX = canonX-5;
      shotY = canonY;
      if (sounds.muted == false){
      document.getElementById("laser").play();
      }
    }
    }


  function moveShot(){
    if (shotFired){
      shotY -= 5;
      }
    if (shotY <= -20){
        shotFired = false;
    }
  }

  function moveSnake(){
    snakeX -= snakeSpeed;
    snakeX2 -= snakeSpeed2;
    snakeX3 -= snakeSpeed3;
    snakeX4 -= snakeSpeed4;
    snakeX5 -= snakeSpeed5;
    snakeX6 -= snakeSpeed6;
    snakeX7 -= snakeSpeed7;
    snakeX8 -= snakeSpeed8;

    if (snakeX < -50){
      snakeY += 50;
      snakeSpeed = snakeSpeed*(-1);
    }

    if (snakeX > 400){
      snakeY += 50;
      snakeSpeed = snakeSpeed*(-1);
    }

    if (snakeX2 < -50){
      snakeY2 += 50;
      snakeSpeed2 = snakeSpeed2*(-1);
    }

    if (snakeX2 > 400){
      snakeY2 += 50;
      snakeSpeed2 = snakeSpeed2*(-1);
    }

    if (snakeX3 < -50){
      snakeY3 += 50;
      snakeSpeed3 = snakeSpeed3*(-1);
    }

    if (snakeX3 > 400){
      snakeY3 += 50;
      snakeSpeed3 = snakeSpeed3*(-1);
    }

    if (snakeX4 < -50){
      snakeY4 += 50;
      snakeSpeed4 = snakeSpeed4*(-1);
    }

    if (snakeX4 > 400){
      snakeY4 += 50;
      snakeSpeed4 = snakeSpeed4*(-1);
    }

    if (snakeX5 < -50){
      snakeY5 += 50;
      snakeSpeed5 = snakeSpeed5*(-1);
    }

    if (snakeX5 > 400){
      snakeY5 += 50;
      snakeSpeed5 = snakeSpeed5*(-1);
    }

    if (snakeX6 < -50){
      snakeY6 += 50;
      snakeSpeed6 = snakeSpeed6*(-1);
    }

    if (snakeX6 > 400){
      snakeY6 += 50;
      snakeSpeed6 = snakeSpeed6*(-1);
    }

    if (snakeX7 < -50){
      snakeY7 += 50;
      snakeSpeed7 = snakeSpeed7*(-1);
    }

    if (snakeX7 > 400){
      snakeY7 += 50;
      snakeSpeed7 = snakeSpeed7*(-1);
    }

    if (snakeX8 < -50){
      snakeY8 += 50;
      snakeSpeed8 = snakeSpeed8*(-1);
    }

    if (snakeX8 > 400){
      snakeY8 += 50;
      snakeSpeed8 = snakeSpeed8*(-1);
    }
  }

  function hitDetection(){
    if (shotY <= snakeY+40 && shotY >= snakeY && shotX >= snakeX && shotX <= snakeX+50 && snakeLives >= 1){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (shotY <= snakeY2+40 && shotY >= snakeY2 && shotX <= snakeX2+50 && shotX >= snakeX2 && snakeLives >= 2){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (shotY <= snakeY3+40 && shotY >= snakeY3 && shotX <= snakeX3+50 && shotX >= snakeX3 && snakeLives >= 3){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (shotY <= snakeY4+40 && shotY >= snakeY4 && shotX <= snakeX4+50 && shotX >= snakeX4 && snakeLives >= 4){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (shotY <= snakeY5+40 && shotY >= snakeY5 && shotX <= snakeX5+50 && shotX >= snakeX5 && snakeLives >= 5){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (shotY <= snakeY6+40 && shotY >= snakeY6 && shotX <= snakeX6+50 && shotX >= snakeX6 && snakeLives >= 6){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (shotY <= snakeY7+40 && shotY >= snakeY7 && shotX <= snakeX7+50 && shotX >= snakeX7 && snakeLives >= 7){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (shotY <= snakeY8+40 && shotY >= snakeY8 && shotX <= snakeX8+50 && shotX >= snakeX8 && snakeLives == 8){
      snakeLives -= 1;
      score += 10;
      shotFired = false;
      shotY = 600;
      if (sounds.muted == false){
      document.getElementById("hit").play();
      }
    }

    if (snakeLives == 0){
      
      clearInterval(intervalSnake);
      clearInterval(intervalGame);
      gameSpeed -= 2;
      canvasContext.font = "24px retro";
      canvasContext.fillStyle = "limegreen";
      canvasContext.fillText("Next round!", 100, canvas.height/2);
      setTimeout(cooldown, 2000);
      function cooldown(){
        intervalGame = setInterval(callAll, 1000/140);
        intervalSnake = setInterval(moveSnake, gameSpeed);
      }
      

      if (sounds.muted == false){
      document.getElementById("win-shooter").play();
      
      }


      canvas;
      canvasContext;
      spaceshipX = 150;
      canonY = 520;
      canonX = spaceshipX+50;
      shotX;
      shotY;

      snakeX = 0;
      snakeX2 = 50;
      snakeX3 = 100;
      snakeX4 = 150;
      snakeX5 = 200;
      snakeX6 = 250;
      snakeX7 = 300;
      snakeX8 = 350;

      snakeY = 0;
      snakeY2 = 0;
      snakeY3 = 0;
      snakeY4 = 0;
      snakeY5 = 0;
      snakeY6 = 0;
      snakeY7 = 0;
      snakeY8 = 0;

      snakeSpeed = 10;
      snakeSpeed2 = 10;
      snakeSpeed3 = 10;
      snakeSpeed4 = 10;
      snakeSpeed5 = 10;
      snakeSpeed6 = 10;
      snakeSpeed7 = 10;
      snakeSpeed8 = 10;

      snakeLives = 8;
      aPressed = false;
      dPressed = false;
      wPressed = false;
      shotFired = false;
    }

    if (snakeY4 >= 450){
    
      score = 0;
      clearInterval(intervalSnake);
      clearInterval(intervalGame);
      document.getElementById("startButton").innerHTML = "ðŸ‘¾ Retry ðŸ‘¾";
      document.getElementById("startButton").disabled = false;
      

      if (sounds.muted == false){
      document.getElementById("lose-shooter").play();
      }

      canvasContext.font = "24px retro";
      canvasContext.fillStyle = "limegreen";
      canvasContext.fillText("Play again?", 92, canvas.height/2);

      if(isHighscore){
        canvasContext.font = "24px retro";
        canvasContext.fillStyle = "limegreen";
        canvasContext.fillText("New Highscore", 72, 200);
      }

      isHighscore = false;
      gameSpeed = 30;
      canvas;
      canvasContext;
      spaceshipX = 150;
      canonY = 520;
      canonX = spaceshipX+50;
      shotX;
      shotY;
      aPressed = false;
      dPressed = false;
      wPressed = false;
      shotFired = false;

      snakeX = 0;
      snakeX2 = 50;
      snakeX3 = 100;
      snakeX4 = 150;
      snakeX5 = 200;
      snakeX6 = 250;
      snakeX7 = 300;
      snakeX8 = 350;

      snakeY = 0;
      snakeY2 = 0;
      snakeY3 = 0;
      snakeY4 = 0;
      snakeY5 = 0;
      snakeY6 = 0;
      snakeY7 = 0;
      snakeY8 = 0;

      snakeSpeed = 10;
      snakeSpeed2 = 10;
      snakeSpeed3 = 10;
      snakeSpeed4 = 10;
      snakeSpeed5 = 10;
      snakeSpeed6 = 10;
      snakeSpeed7 = 10;
      snakeSpeed8 = 10;

      snakeLives = 8;
      aPressed = false;
      dPressed = false;
      wPressed = false;
      shotFired = false;
    }
  }


  const burgerMenu = document.getElementById("burger-menu");
  const hamburger = document.getElementById("hamburger");

  function showMenu(){
  if (burgerMenu.style.height === "0vh") {
    burgerMenu.style.height = "100vh";
    burgerMenu.style.opacity = "0.99";
    hamburger.style.position = "fixed";
  }
  else {
    burgerMenu.style.height = "0vh";
    burgerMenu.style.opacity = "0";
    hamburger.style.position = "absolute";
  }
}

</script>

</body>
</html>
